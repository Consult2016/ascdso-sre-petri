<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context" xmlns:wix="http://www.wixpress.com/spring"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans-3.0.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd http://www.wixpress.com/spring http://www.wixpress.com/spring/wix-spring.xsd">

    <wix:import-once resource="classpath:wix-framework-mvc-config.xml"/>
    <context:annotation-config/>

    <bean id="laboratoryTestApp" class="com.wixpress.framework.test.jetty.ITJettyServer" init-method="start"
          destroy-method="stop" depends-on="fakePetriServer, fakeRpcServer">
        <property name="configLocation" value="classpath:/laboratory-app-spring-test-config.xml"/>
        <property name="contextRoot" value="/"/>
        <property name="port" value="9901"/>
        <property name="dispatcherServletPath" value="/*"/>
    </bean>


    <bean id="fakePetriServer" class="com.wixpress.petri.laboratory.FakePetriServer"
          init-method="start"
          destroy-method="stop">
        <constructor-arg index="0" value="9902"/>
        <constructor-arg index="1" ref="ramPetriClient"/>
    </bean>
    <bean id="ramPetriClient" class="com.wixpress.petri.petri.RAMPetriClient"/>


    <!-- This plays the part of the renderer (for example) in the test topology, and laboratoryTestApp plays the part of public (for example) -->
    <bean id="fakeRpcServer" class="com.wixpress.petri.laboratory.FakeRpcServer"
          init-method="start" destroy-method="stop"/>

</beans>
